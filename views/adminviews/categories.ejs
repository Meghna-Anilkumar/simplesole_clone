<%-include('./sidebar') %>
  <div class="col-md-9 content">

    <h2 style="color: crimson;">Category Details</h2>


    <form action="/categories" method="get">

      <a href="/addcategory" class="btn btn-primary mb-3">Add new category</a>
    </form>
    <% if(message){%>
      <div class="alert alert-dismissable fade show alert-<%= message.type %>" role="alert">
        <button class="btn-close" type="button" data-bs-dismiss="alert" aria-label="Close"></button>
        <strong>
          <%= message.message %>
        </strong>
      </div>
    <%} %>
        <% if (category!='' ) { %>
          <table class="table">
            <thead>
              <tr>
                <th scope="col">No.</th>
                <th scope="col">Category Name</th>
                <th scope="col">Action</th>
              </tr>
            </thead>
            <tbody>
              <% category.forEach((row,index)=> { %>
                <tr>
                  <td>
                    <%=index+1 %>
                  </td>
                  <td>
                    <%=row.name %>
                  </td>
                  <td>
                    <a href="/editCategory/<%= row._id %>" class="text-success">
                      <i class="fas fa-edit"></i>
                    </a>
                    <form method="post" action="/blockCat">
                      <input type="hidden" name="categoryId" value="<%= row._id %>">
                      <% if (row.blocked) { %>
                        <button type="submit" class="btn btn-success">Unblock</button>
                        <% } else { %>
                          <button type="submit" class="btn btn-danger">Block</button>
                          <% } %>
                    </form>
                  </td>
                </tr>
                <% }) %>


            </tbody>
          </table>
          <% } else{ %>
            <h1 class="text-center text-secondary mt-5">No category found in the database</h1>
            <% }%>

              </main>
  </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>

  </html>